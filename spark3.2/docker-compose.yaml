version: "2"

services:
  spark-master:
    image: duplocloud/anyservice:spark_3_2_v3
    hostname: spark-master
    restart: always
    ports:
      - "8080:8080"
      - "7077:7077"
      - "4040:4040"
    volumes:
      - "./code:/home/ubuntu/work"
      - "./logs-master:/home/ubuntu/logs"
        environment:
      - DUPLO_SPARK_MASTER_IP="0.0.0.0"
      - DUPLO_SPARK_NODE_TYPE=master
    command:
      - /home/ubuntu/statup.sh

#
#  spark-worker:
#    image: duplocloud/anyservice:spark_3_2_v3
#    hostname: spark-worker
#    restart: always
#    depends_on:
#      - spark-master
#    ports:
#      - "8081:8081"
#    environment:
#      - DUPLO_SPARK_MASTER_IP=spark-master
#      - DUPLO_SPARK_NODE_TYPE=worker
#    links:
#      - spark-master:spark-master
